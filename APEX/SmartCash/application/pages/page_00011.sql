prompt --application/pages/page_00011
begin
wwv_flow_imp_page.create_page(
 p_id=>11
,p_user_interface_id=>wwv_flow_imp.id(37627114721722786135)
,p_name=>'Cancel Invoice'
,p_page_mode=>'MODAL'
,p_step_title=>'Cancel Invoice'
,p_autocomplete_on_off=>'OFF'
,p_page_template_options=>'#DEFAULT#'
,p_page_component_map=>'17'
,p_last_updated_by=>'MACDENIZ'
,p_last_upd_yyyymmddhh24miss=>'20220624132241'
);
wwv_flow_imp_page.create_page_plug(
 p_id=>wwv_flow_imp.id(3115650465198728380)
,p_plug_name=>'Cancel Region'
,p_region_template_options=>'#DEFAULT#'
,p_plug_template=>wwv_flow_imp.id(37627008146725786055)
,p_plug_display_sequence=>10
,p_include_in_reg_disp_sel_yn=>'Y'
,p_plug_query_options=>'DERIVED_REPORT_COLUMNS'
,p_attribute_01=>'N'
,p_attribute_02=>'HTML'
);
wwv_flow_imp_page.create_page_button(
 p_id=>wwv_flow_imp.id(3115650564921728381)
,p_button_sequence=>10
,p_button_plug_id=>wwv_flow_imp.id(3115650465198728380)
,p_button_name=>'Cancel'
,p_button_action=>'DEFINED_BY_DA'
,p_button_template_options=>'#DEFAULT#'
,p_button_template_id=>wwv_flow_imp.id(37627090985680786117)
,p_button_image_alt=>'Cancel'
,p_button_position=>'BELOW_BOX'
,p_button_execute_validations=>'N'
,p_warn_on_unsaved_changes=>null
);
wwv_flow_imp_page.create_page_button(
 p_id=>wwv_flow_imp.id(3115650600580728382)
,p_button_sequence=>20
,p_button_plug_id=>wwv_flow_imp.id(3115650465198728380)
,p_button_name=>'DeleteInvoice'
,p_button_action=>'DEFINED_BY_DA'
,p_button_template_options=>'#DEFAULT#:t-Button--danger'
,p_button_template_id=>wwv_flow_imp.id(37627090985680786117)
,p_button_image_alt=>'Cancel Invoice'
,p_button_position=>'BELOW_BOX'
,p_button_execute_validations=>'N'
,p_warn_on_unsaved_changes=>null
);
wwv_flow_imp_page.create_page_item(
 p_id=>wwv_flow_imp.id(3115650317207728379)
,p_name=>'P11_CANCEL_REASON'
,p_item_sequence=>20
,p_item_plug_id=>wwv_flow_imp.id(3115650465198728380)
,p_use_cache_before_default=>'NO'
,p_item_default=>'falsch eingetippt.'
,p_prompt=>'Cancel Reason'
,p_display_as=>'NATIVE_TEXTAREA'
,p_cSize=>30
,p_cHeight=>5
,p_field_template=>wwv_flow_imp.id(37627089898381786115)
,p_item_template_options=>'#DEFAULT#'
,p_encrypt_session_state_yn=>'N'
,p_attribute_01=>'Y'
,p_attribute_02=>'N'
,p_attribute_03=>'N'
,p_attribute_04=>'BOTH'
);
wwv_flow_imp_page.create_page_item(
 p_id=>wwv_flow_imp.id(3115650731287728383)
,p_name=>'P11_BID'
,p_item_sequence=>10
,p_item_plug_id=>wwv_flow_imp.id(3115650465198728380)
,p_use_cache_before_default=>'NO'
,p_display_as=>'NATIVE_HIDDEN'
,p_encrypt_session_state_yn=>'N'
,p_attribute_01=>'N'
);
wwv_flow_imp_page.create_page_da_event(
 p_id=>wwv_flow_imp.id(3115650856522728384)
,p_name=>'Cancel Dialog'
,p_event_sequence=>10
,p_triggering_element_type=>'BUTTON'
,p_triggering_button_id=>wwv_flow_imp.id(3115650564921728381)
,p_bind_type=>'bind'
,p_bind_event_type=>'click'
);
wwv_flow_imp_page.create_page_da_action(
 p_id=>wwv_flow_imp.id(3115650921254728385)
,p_event_id=>wwv_flow_imp.id(3115650856522728384)
,p_event_result=>'TRUE'
,p_action_sequence=>10
,p_execute_on_page_init=>'N'
,p_action=>'NATIVE_DIALOG_CANCEL'
);
wwv_flow_imp_page.create_page_da_event(
 p_id=>wwv_flow_imp.id(3115650990604728386)
,p_name=>'Delete Invoice'
,p_event_sequence=>20
,p_triggering_element_type=>'BUTTON'
,p_triggering_button_id=>wwv_flow_imp.id(3115650600580728382)
,p_condition_element=>'P11_BID'
,p_triggering_condition_type=>'NOT_NULL'
,p_bind_type=>'bind'
,p_bind_event_type=>'click'
);
wwv_flow_imp_page.create_page_da_action(
 p_id=>wwv_flow_imp.id(3115651170139728387)
,p_event_id=>wwv_flow_imp.id(3115650990604728386)
,p_event_result=>'TRUE'
,p_action_sequence=>10
,p_execute_on_page_init=>'N'
,p_action=>'NATIVE_EXECUTE_PLSQL_CODE'
,p_attribute_01=>wwv_flow_string.join(wwv_flow_t_varchar2(
'API_SMARTCASH.CANCEL_INVOICE(TO_NUMBER(:P11_BID),:P11_CANCEL_REASON);',
'--update sc_bill set canceled = systimestamp , cancel_reason = :P11_CANCEL_REASON where bid = :P11_BID;',
'--Select bid INTO :P11_BID from sc_bill where canceled is null order by "CREATED" DESC fetch first 1 row only;'))
,p_attribute_02=>'P11_CANCEL_REASON,P11_BID'
,p_attribute_03=>'P11_BID'
,p_attribute_04=>'N'
,p_attribute_05=>'PLSQL'
,p_wait_for_result=>'Y'
);
wwv_flow_imp_page.create_page_da_action(
 p_id=>wwv_flow_imp.id(3115651187325728388)
,p_event_id=>wwv_flow_imp.id(3115650990604728386)
,p_event_result=>'TRUE'
,p_action_sequence=>20
,p_execute_on_page_init=>'N'
,p_action=>'NATIVE_DIALOG_CLOSE'
,p_attribute_01=>'P11_BID'
);
end;
/
